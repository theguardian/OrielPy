<%
    import orielpy
%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 //EN"> 
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Network Status</title>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/vader/jquery-ui.css" rel="stylesheet" type="text/css" />
	<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>	
</head>
<body>

<div id="container">

	<div class="invisible">
	</div>

	<div id="content">
		<div id="fileserver">
			
				<table>
					<tr>
						<td rowspan=4><img class="unit" src="images/server.png">
						<td colspan=2 class="cpu_information"></td>
					</tr>
					<tr>
						<td class="disk_summary"></td>
						<td class="ext_summary"></td>
					</tr>
					<tr>
						<td class="network"></td>
					</tr>
					<tr>
						<td colspan=2><p id="clickforlogs">LOGS</p> | <p id="clickforprocess">PROCESSES</p></td>
					</tr>
				</table>

				<div class="cpu_info">
				</div>
				<div class="ram_info">
				</div>
				<div class="swap_info">
				</div>
				<div class="fans_temps_info">
				</div>
				<div class="networking_info">
				</div>
				<div class="hd_info">
				</div>
		</div>
	</div>
	

</div>
</body>
</html>

<script type="text/javascript">
$(document).ready(function() {
	$('.invisible').load('static', function(){
		var cpu_information = $('#cpu_information').html();
		cpu_information_json = JSON.parse(cpu_information);
		
		$('.cpu_information').append('<p class="name-left">CPU: '+cpu_information_json[0].model_name+'<BR>');
		$('.cpu_information').append('Speed: '+cpu_information_json[0].cpu_MHz+' MHz | ');
		$('.cpu_information').append('Cache: '+cpu_information_json[0].cache_size+'</p>');

	});
	
	setInterval(function() {	
		$('.invisible').load('diskio', function(){
			var disk_summary_info = $('#disk_summary').html();
			disk_summary_json = JSON.parse(disk_summary_info);
			$('.disk_summary').html('');
			$.each(disk_summary_json, function(i, item) {	
				$('.disk_summary').append('<p class="name-left">'+disk_summary_json[i].disk_id+'</p>');
				$('.disk_summary').append('<p class="name-left-gap">'+disk_summary_json[i].status+'</p>');
				$('.disk_summary').append('<div class="progress_minute gradient_minute"><span style="width:'+disk_summary_json[i].activity+'%; background:#83F52C"></span></div>');
			});
			var ext_summary_info = $('#ext_summary').html();
			ext_summary_json = JSON.parse(ext_summary_info);
			$('.ext_summary').html('');
			$.each(ext_summary_json, function(i, item) {	
				$('.ext_summary').append('<p class="name-left">'+ext_summary_json[i].disk_id+'</p>');
				$('.ext_summary').append('<p class="name-left-gap">'+ext_summary_json[i].status+'</p>');
				$('.ext_summary').append('<div class="progress_minute gradient_minute"><span style="width:'+ext_summary_json[i].activity+'%; background:#83F52C"></span></div>');
			});
		});
	}, 2000); 
	
	setInterval(function() {
		$('.invisible').load('dynamic', function(){
		
			var cpu_info = $('#cpu_info').html();
			cpu_info_json = JSON.parse(cpu_info);
			$('.cpu_info').html('');
			$.each(cpu_info_json, function(i, item) {
				var id = i+1;
				$('.cpu_info').append('<p class="name-left">CPU'+id+'</p>');			
				$('.cpu_info').append('<div class="progress_small gradient_small"><span style="width:'+cpu_info_json[i].cpu_percent+'%; background:#67C8FF"></span></div>');
				$('.cpu_info').append('<p class="name-right-corrected">'+cpu_info_json[i].cpu_percent+'%</p>');
			});
			
			var ram_info = $('#ram_info').html();
			ram_info_json = JSON.parse(ram_info);
			$('.ram_info').html('');
			$('.ram_info').append('<p class="name-left">RAM</p>');
			$('.ram_info').append('<p class="name-right">'+ram_info_json[0].mem_free+' / '+ram_info_json[0].mem_total+' MB Free</p>');
			$('.ram_info').append('<div class="progress_small gradient_small"><span style="width:'+ram_info_json[0].mem_percent+'%; background:#83F52C"></span></div>');
			$('.ram_info').append('<p class="name-right-corrected">'+ram_info_json[0].mem_percent+'%</p>');

			
			var swap_info = $('#swap_info').html();
			swap_info_json = JSON.parse(swap_info);
			$('.swap_info').html('');
			$('.swap_info').append('<p class="name-left">Swap Memory</p>');
			$('.swap_info').append('<p class="name-right">'+swap_info_json[0].swap_free+' / '+swap_info_json[0].swap_total+' MB Free</p>');
			$('.swap_info').append('<div class="progress_small gradient_small"><span style="width:'+swap_info_json[0].swap_percent+'%; background:#83F52C"></span></div>');
			$('.swap_info').append('<p class="name-right-corrected">'+swap_info_json[0].swap_percent+'%</p>');

			
			var hard_drive_info = $('#partition_info').html();
			hard_drive_json = JSON.parse(hard_drive_info);
			$('.hd_info').html('');
			$.each(hard_drive_json, function(i, item) {			
				$('.hd_info').append('<p class="name-left">'+hard_drive_json[i].mountpoint+' ('+hard_drive_json[i].filesystem+')</p>');
				$('.hd_info').append('<p class="name-right">'+hard_drive_json[i].free+' / '+hard_drive_json[i].total+' Free</p>');
				$('.hd_info').append('<div class="progress_small gradient_small"><span style="width:'+hard_drive_json[i].percent+'%; background:#FD5F00"></span></div>');
				$('.hd_info').append('<p class="name-right-corrected">'+hard_drive_json[i].percent+'%</p>');
			});
			
			var network_activity = $('#network_activity').html();
			network_json = JSON.parse(network_activity);
			$('.network').html('');
			$('.network').append('<p class="name-left">'+network_json[0].name+'</p>');
			$('.network').append('<p class="name-left-gap-big">'+network_json[0].status+'</p>');
			$('.network').append('<div class="progress_minute gradient_minute"><span style="width:'+network_json[0].activity+'%; background:#FD5F00"></span></div>');

			
			var networking_info = $('#networking_info').html();
			networking_json = JSON.parse(networking_info);
			$('.networking_info').html('');
			$('.networking_info').append('<p class="name-left">Network Rx Rate</p>');
			$('.networking_info').append('<p class="name-right">'+networking_json[0].download_rate+'</p>');
			$('.networking_info').append('<div class="progress_small gradient_small"><span style="width:'+networking_json[0].download_percent+'%; background:#ffffff"></span></div>');
			$('.networking_info').append('<p class="name-right-corrected">'+networking_json[0].download_percent+'%</p>');
				
			$('.networking_info').append('<p class="name-left">Network Tx Rate</p>');
			$('.networking_info').append('<p class="name-right">'+networking_json[0].upload_rate+'</p>');
			$('.networking_info').append('<div class="progress_small gradient_small"><span style="width:'+networking_json[0].upload_percent+'%; background:#ffffff"></span></div>');
			$('.networking_info').append('<p class="name-right-corrected">'+networking_json[0].upload_percent+'%</p>');

		});
	}, 2000);
	setInterval(function() {	
		$('.invisible').load('sysfiles', function(){
			var fans_temps_info = $('#fans_temps_info').html();
			fans_temps_json = JSON.parse(fans_temps_info);
			$('.fans_temps_info').html('');

			$('.fans_temps_info').append('<p class="name-left">CPU Temperature</p>');
			$('.fans_temps_info').append('<p class="name-right">'+fans_temps_json[0].cpu1_temp+'&degC</p>');
			$('.fans_temps_info').append('<div class="progress_small gradient_small"><span style="width:'+fans_temps_json[0].cpu1_temp_percent+'%; background:#ffffff"></span></div>');
			$('.fans_temps_info').append('<p class="name-right-corrected">'+fans_temps_json[0].cpu1_temp_percent+'%</p>');
				
			$('.fans_temps_info').append('<p class="name-left">CPU Fan Speed</p>');
			$('.fans_temps_info').append('<p class="name-right">'+fans_temps_json[0].cpu_fan+' RPM</p>');
			$('.fans_temps_info').append('<div class="progress_small gradient_small"><span style="width:'+fans_temps_json[0].cpu_fan_percent+'%; background:#ffffff"></span></div>');
			$('.fans_temps_info').append('<p class="name-right-corrected">'+fans_temps_json[0].cpu_fan_percent+'%</p>');
				
			$('.fans_temps_info').append('<p class="name-left">System Temperature</p>');
			$('.fans_temps_info').append('<p class="name-right">'+fans_temps_json[0].sys_temp+'&degC</p>');
			$('.fans_temps_info').append('<div class="progress_small gradient_small"><span style="width:'+fans_temps_json[0].sys_temp_percent+'%; background:#ffffff"></span></div>');
			$('.fans_temps_info').append('<p class="name-right-corrected">'+fans_temps_json[0].sys_temp_percent+'%</p>');
				
			$('.fans_temps_info').append('<p class="name-left">System Fan Speed</p>');
			$('.fans_temps_info').append('<p class="name-right">'+fans_temps_json[0].sys_fan+' RPM</p>');
			$('.fans_temps_info').append('<div class="progress_small gradient_small"><span style="width:'+fans_temps_json[0].sys_fan_percent+'%; background:#ffffff"></span></div>');
			$('.fans_temps_info').append('<p class="name-right-corrected">'+fans_temps_json[0].sys_fan_percent+'%</p>');

		});
	}, 2000); 

	$("#dialog").dialog({
			autoOpen: false,
			position: 'center' ,
			title: 'Latest Activity',
			draggable: false,
			resizable : false,
			modal : true,
			width: 800,
		});
	
	$('#clickforlogs').click(function() {
		$("#dialog").load('interfaces/default/logs.html', function() {
			$("#dialog").dialog("open");
		});
	});

	$('#clickforprocess').click(function() {
		$("#dialog").load('interfaces/default/processes.html', function() {
			$("#dialog").dialog("open");
		});
	});

});
</script>

<div id="dialog"></div>